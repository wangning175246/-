#### Raft 是强一致性的日志同步算法

当一个操作进行的时候会把日志复制给多个一半以上的节点后而后本地提交返回给客户端，写入性能差，大概1000/s次。

提交的意思是写入数据到真正的kv存储中，没有提交之前都是写日志。

leader 需要半数以上的节点参数，

节点commit 日志最多的允许被选举为leader

commit 日志同样多，则term,index越大的允许选举为leader

leader 如果的日志没有同步到半数节点之前，网络发生分区，而没有完成复制，leader 就没办法提交日志。

#### 重要特性

底层存储时按照key有序排列的，可以顺序遍历

​	etcd没有目录的概念，所有key都是字符串，可以通过前缀遍历某个前缀的所有key

因为key有序，所以etcd天然支持按目录结构高效遍历

​	`etcdctl get /cron/jons/ --prefix`

执行复杂事务，提供类似于if....then....else的事务能力

基于租约机制实现的key的TTL过期

​	创建key-value的时候带有租约(如，lease=5)，租约会和key绑定，当租约过期，租约会删除和租约绑定的key

​	如果不想租约过期可以通过keepAlive进行续租。

MVCC多版本控制，对于每个key的value都时一个版本的概念，一个key维护这个多个版本，用于实现watch机制，历史版本过多，可以通过compact命令完成删除。

监听kv变化，多个应用可以通过watch机制，可以监听某个key，或者某个目录key前缀的连续变化，会扫描key的所有历史版本。常用于配置分发，状态同步。